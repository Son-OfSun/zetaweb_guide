# Zeta Веб-сервисы

## Zeta Веб-сервисы \(WSG\)

**Zeta Веб-сервисы \(WSG\)** - это решение, собравшее веб-сервисы различных поставщиков автозапчастей в один удобный API.

{% hint style="info" %}
Информация о тарифах и описание сервиса доступны по [ссылке](https://www.zetasoft.ru/products-zeta-webservices/).
{% endhint %}

## Подключение Zeta Веб-сервисы в Zeta Web

Подключение можно разделить на 4 этапа:

### Этап 1. Получение данных для подключения

Для подключения к Zeta Веб-сервисы необходимы следующие данные:

* Адрес подключения WSG \(основной - wsg.zetasoft.ru, резервный - webservices.zetasoft.ru\)
* ID - идентификатор пользователя;
* Пароль.

Для получения ID и пароля [свяжитесь с отделом продаж](https://www.zetasoft.ru/contacts/)

### Этап 2. Настройка работы сервиса

После получения данных перейдите в раздел меню _Zeta Web - Настройки и администрирование - Настройки интеграции с внешними системами - Настройки веб-сервисов и внешних каталогов автозапчастей_

![](../../.gitbook/assets/image%20%28325%29.png)

В открывшемся окне заполните основной и резервный адрес WSG, а также укажите группу и вид для новой номенклатуры.

![](../../.gitbook/assets/image%20%28364%29.png)

Сохраните настройки, нажав ![](../../.gitbook/assets/image-87%20%281%29.png)

После это нажмите "Перейти к настройкам веб-шлюза WSG". В открывшемся окне "Настройки WSG" нажмите "Создать".

![](../../.gitbook/assets/image%20%28205%29.png)

В открывшейся форме создания укажите необходимые параметры:

![](../../.gitbook/assets/image%20%28363%29.png)

* **Наименование настройки**;
* **Логин \(ID\)** - введите свой ID;
* **Пароль**;
* **Таймаут** \(время в миллисекундах\) - максимальное время ожидания ответа от веб-сервисов поставщиков;

{% hint style="info" %}
Zeta Веб-сервисы асинхронно \(параллельно\) отправляет запросы всем подключенным веб-сервисам поставщиков. Если некоторые веб-сервисы по каким-то причинам отвечают долго, мы можем установить максимальное время ответа, спустя которое Zeta Веб-сервисы вернет все ответы, которые уложились в отсечку.

У Zeta Веб-сервисы есть своя отсечка 60 секунд, которая сработает если таймаут не установлен и от веб-сервиса поставщика нет ответа более 60 секунд.
{% endhint %}

* **Загрузка данных на сервере** - служебная настройка, которая временно не используется;
* **Время хранения ответа** \(время в минутах\) - есть возможность кэшировать \(сохранять\) на сервере ответы на определенное время для ускорения следующего поиска с аналогичным запросом;
* **Включен** - установите флаг, чтобы настройка работала.

После ввода все необходимых параметров нажмите ![](../../.gitbook/assets/image-87.png) .

### Этап 3. Настройка веб-сервисов поставщиков

После ввода всех параметров и сохранения нажмите "Управление веб-сервисами WSG".

![](../../.gitbook/assets/image%20%28255%29.png)

Если все данные были введены верно, то в открывшейся форме будет список веб-сервисов с описанием порядка действий для их включения.

![](../../.gitbook/assets/image%20%28131%29.png)

  
Следуйте индивидуальной инструкции по каждому поставщику для настройки.

{% hint style="info" %}
Обязательно выберите контрагента в поле "Поставщик \(идентификатор\)"
{% endhint %}

Для включения или выключения настроенного веб-сервиса воспользуйтесь кнопками "Включить" и "Отключить", а также "Проверить подключение" для тестирования.

![](../../.gitbook/assets/image%20%28121%29.png)

### Этап 4. Использование настройки в контролах на страницах

Заключительным этапом для отображения предложений поставщиков, подключенных через Zeta Веб-сервисы, является указание настройки в необходимых контролах.

Веб-сервисы поставщиков доступны для использования в следующих контролах:

* [Поиск. Поиск товаров \(уточнение артикула и бренда товара\)](../../tekhnicheskaya-dokumentaciya/opisanie-kontrolov/1.-poisk-katalog-tovary/poisk.-poisk-tovarov-utochnenie-artikula-i-brenda-tovara-..md)
* [Поиск. Проценка \(цены и наличие товаров\)](../../tekhnicheskaya-dokumentaciya/opisanie-kontrolov/1.-poisk-katalog-tovary/poisk.-procenka-ceny-i-nalichie-tovarov-..md)
* [Поиск. Аналоги товара v2 \(цены и наличие товаров\)](../../tekhnicheskaya-dokumentaciya/opisanie-kontrolov/1.-poisk-katalog-tovary/poisk.-analogi-tovara-v2-ceny-i-nalichie-tovarov-..md)

При использовании данных контролов на странице необходимо выбрать настройку WSG.

![](../../.gitbook/assets/image%20%28339%29.png)

## Ограничения по запросам и роботы поисковых систем

При работе с Zeta Веб-сервисы стоит учитывать возможные ограничения по количеству поисковых запросов:

* Со стороны поставщиков. Обычно, поставщики сами озвучивают такие ограничения;
* Ограничение по запросам в [тарифе](https://www.zetasoft.ru/products-zeta-webservices/).

{% hint style="info" %}
Поисковые запросы также расходуются при обходе страниц \(детальные карточки товара, ссылки для поиска в каталоге и др.\) роботами поисковых систем.
{% endhint %}

Ограничение робота поисковых систем можно сделать с использованием переменных и доступности по ролям, закрыв доступ Анонимному пользователю \(т.к. робот поисковой системы для нас обычный анонимный пользователь сайта\). Рассмотрим на примере страницы уточнения бренда \(реализовано в типовом дизайен\), на которой используется контрол [Поиск. Поиск товаров \(уточнение артикула и бренда товара\)](../../tekhnicheskaya-dokumentaciya/opisanie-kontrolov/1.-poisk-katalog-tovary/poisk.-poisk-tovarov-utochnenie-artikula-i-brenda-tovara-..md).

![](../../.gitbook/assets/image%20%28365%29.png)

Переменные search-line \(строка поиска\) и button-to-top \(кнопка наверх\) добавлены стандартно на страницу.

Переменные **clarify-wsg** и **clarify-without-wsg** отличаются лишь указанной настройкой и доступностью ролей, а это как раз позволяют нам ограничить доступ анонимным пользователям к использованию веб-сервисов.

![&#x41D;&#x430;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x43A;&#x430; WSG &#x432; &#x43F;&#x435;&#x440;&#x435;&#x43C;&#x435;&#x43D;&#x43D;&#x43E;&#x439; clarify-wsg](../../.gitbook/assets/image%20%28197%29.png)

![&#x414;&#x43E;&#x441;&#x442;&#x443;&#x43F; &#x440;&#x43E;&#x43B;&#x435;&#x439; &#x43A; &#x43F;&#x435;&#x440;&#x435;&#x43C;&#x435;&#x43D;&#x43D;&#x44B;&#x43C; ](../../.gitbook/assets/image%20%28111%29.png)

